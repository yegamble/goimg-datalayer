# ============================================================================
# Development Environment Configuration
# ============================================================================
# Copy this file to .env and update with your local development settings
#
# WARNING: This file contains sensitive defaults for DEVELOPMENT ONLY
# DO NOT use these values in production!
#
# For production, see .env.prod.example

# ============================================================================
# Database Configuration
# ============================================================================
DB_USER=goimg
DB_PASSWORD=goimg_dev_password
DB_NAME=goimg
DB_HOST=localhost
DB_PORT=5432
DB_SSL_MODE=disable

# Connection pooling
DB_MAX_OPEN_CONNS=25
DB_MAX_IDLE_CONNS=5
DB_CONN_MAX_LIFETIME=5m

# Performance tuning
DB_MAX_CONNECTIONS=100
DB_SHARED_BUFFERS=256MB
DB_EFFECTIVE_CACHE_SIZE=1GB
DB_WORK_MEM=4MB
DB_MAINTENANCE_WORK_MEM=64MB

# ============================================================================
# Redis Configuration
# ============================================================================
REDIS_URL=redis://localhost:6379
REDIS_PASSWORD=
REDIS_DB=0
REDIS_MAX_RETRIES=3
REDIS_MAX_MEMORY=512mb

# ============================================================================
# JWT Configuration
# ============================================================================
# WARNING: Generate a strong secret for production!
# Example: openssl rand -base64 64
JWT_SECRET=dev_secret_change_in_production_min_32_chars
JWT_EXPIRATION=24h
JWT_REFRESH_EXPIRATION=168h

# ============================================================================
# API Server Configuration
# ============================================================================
API_PORT=8080
API_HOST=0.0.0.0
API_READ_TIMEOUT=30s
API_WRITE_TIMEOUT=30s
API_IDLE_TIMEOUT=120s
API_MAX_HEADER_BYTES=1048576

# ============================================================================
# CORS Configuration
# ============================================================================
CORS_ALLOWED_ORIGINS=http://localhost:3000,http://localhost:8080
CORS_ALLOWED_METHODS=GET,POST,PUT,DELETE,OPTIONS
CORS_ALLOWED_HEADERS=Accept,Authorization,Content-Type,X-CSRF-Token
CORS_ALLOW_CREDENTIALS=true

# ============================================================================
# Storage Configuration
# ============================================================================
# Options: local, s3, do-spaces, b2
STORAGE_PROVIDER=local

# Local storage
STORAGE_LOCAL_PATH=/tmp/goimg-uploads

# S3 / DigitalOcean Spaces / Backblaze B2
S3_ENDPOINT=
S3_REGION=us-east-1
S3_BUCKET=
S3_ACCESS_KEY=
S3_SECRET_KEY=
S3_USE_SSL=true

# DigitalOcean Spaces example:
# S3_ENDPOINT=nyc3.digitaloceanspaces.com
# S3_REGION=us-east-1
# S3_BUCKET=my-goimg-bucket

# Backblaze B2 example:
# S3_ENDPOINT=s3.us-west-004.backblazeb2.com
# S3_REGION=us-west-004
# S3_BUCKET=my-goimg-bucket

# ============================================================================
# IPFS Configuration
# ============================================================================
IPFS_ENABLED=true
IPFS_API_URL=http://localhost:5001
IPFS_GATEWAY_URL=https://ipfs.io

# Pinata (optional - for production pinning)
IPFS_PINATA_JWT=

# Infura (optional - alternative pinning service)
IPFS_INFURA_PROJECT_ID=
IPFS_INFURA_PROJECT_SECRET=

# ============================================================================
# ClamAV Configuration
# ============================================================================
CLAMAV_HOST=localhost
CLAMAV_PORT=3310
CLAMAV_TIMEOUT=30s
CLAMAV_UPDATE_FREQUENCY=24

# ============================================================================
# Image Processing Configuration
# ============================================================================
# Maximum file size in bytes (10MB default)
IMAGE_MAX_FILE_SIZE=10485760

# Allowed MIME types (comma-separated)
IMAGE_ALLOWED_TYPES=image/jpeg,image/png,image/webp,image/gif

# JPEG/WebP quality (1-100)
IMAGE_QUALITY=85

# Strip EXIF metadata
IMAGE_STRIP_METADATA=true

# ============================================================================
# Rate Limiting Configuration
# ============================================================================
RATE_LIMIT_ENABLED=true
RATE_LIMIT_REQUESTS=100
RATE_LIMIT_WINDOW=1m

# ============================================================================
# Worker Configuration
# ============================================================================
WORKER_CONCURRENCY=10
# Queue priority: queue_name:priority
WORKER_QUEUES=critical:6,default:3,low:1

# ============================================================================
# Logging Configuration
# ============================================================================
# Levels: debug, info, warn, error
LOG_LEVEL=debug
# Formats: json, text
LOG_FORMAT=text

# ============================================================================
# Observability Configuration
# ============================================================================
METRICS_ENABLED=true
METRICS_PORT=9090

TRACING_ENABLED=false
TRACING_ENDPOINT=

# ============================================================================
# Data Storage Paths (for docker-compose.prod.yml)
# ============================================================================
DATA_ROOT=/var/lib/goimg

# ============================================================================
# Environment
# ============================================================================
ENVIRONMENT=development
